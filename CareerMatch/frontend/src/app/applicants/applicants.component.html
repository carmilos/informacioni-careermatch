<div class="card">
  <h2>Applicants</h2>
  <div class="muted">
    List of candidates who applied for
    <a *ngIf="job" [routerLink]="['/jobs', job.id]" style="color:#2563eb;text-decoration:underline;cursor:pointer;font-weight:600;">
      {{job.title}}
    </a>
  </div>
</div>

<div *ngFor="let a of applicants" class="card">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div>
      <div><strong>{{a.name}}</strong></div>
      <div class="muted">{{a.email}}</div>
      <div class="muted">Match score: <span style="color:#2563eb;font-weight:600">{{a.score | number:'1.2-2'}}</span></div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button *ngIf="a.cv_path" class="show-cv-btn" (click)="showCV(a)">Show CV</button>
      <a *ngIf="a.cv_path" class="modal-file-btn no-underline" [href]="'/uploads/' + getFilename(a.cv_path)" target="_blank">Download CV</a>
      <span *ngIf="!a.cv_path" class="muted">No CV uploaded</span>
    </div>

<!-- Popup za prikaz CV-ja -->
<div *ngIf="showCVModal" class="modal-overlay">
  <div class="modal-content" style="max-width:700px;">
    <div class="modal-header">
      <h3 class="modal-title">CV Preview</h3>
      <button class="modal-close" (click)="closeCV()">Ã—</button>
    </div>
    <pre style="white-space:pre-wrap;max-height:60vh;overflow:auto;">{{cvContent}}</pre>
  </div>
</div>
  </div>
</div>
